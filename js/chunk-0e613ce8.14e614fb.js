(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e613ce8"],{"02f4":function(t,e,n){var i=n("4588"),o=n("be13");t.exports=function(t){return function(e,n){var s,r,c=String(o(e)),a=i(n),u=c.length;return a<0||a>=u?t?"":void 0:(s=c.charCodeAt(a),s<55296||s>56319||a+1===u||(r=c.charCodeAt(a+1))<56320||r>57343?t?c.charAt(a):s:t?c.slice(a,a+2):r-56320+(s-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var i=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1763:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"IM-demo"},[n("div",{staticClass:"IM"},[t._m(0),n("div",{staticClass:"im_content"},[n("div",{ref:"ref_scroll",staticClass:"im_content-groups"},[n("ul",[t._l(t.msg_list,function(e,i){return[e.type&&"tips"===e.type?n("li",{staticClass:"im_content-tips"},[n("span",[t._v(t._s(e.msg))])]):n("li",{staticClass:"im_content-msgs",attrs:{rule:e.log.user_type}},[n("div",{staticClass:"im_content-msgs-time"},[t._v(t._s(t.$dayjs(e.log.msg_time).format("YYYY-MM-DD HH:mm:ss")))]),n("div",{staticClass:"im_content-msgs-main"},[n("i",{staticClass:"im_icon el-icon-picture"}),n("div",{staticClass:"im_content-msgs-msg"},[n("span",{domProps:{innerHTML:t._s(e.msg)}})])])])]})],2)]),n("div",{staticClass:"im_content-question"},[n("div",{staticClass:"im_content-question-box",on:{click:t.clickHotQuestion}},t._l(t.hot_question,function(e,i){return n("el-button",{key:i,attrs:{round:""}},[t._v(t._s(e.question))])}),1)])]),n("div",{staticClass:"im_inputbox"},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.input_msg,expression:"input_msg",modifiers:{trim:!0}}],staticClass:"im_inputbox-textarea",attrs:{autocomplete:"off",placeholder:"请输入您想问的问题..."},domProps:{value:t.input_msg},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.wsSend(e):null},input:function(e){e.target.composing||(t.input_msg=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),n("div",{staticClass:"im_inputbox-tools"},[n("i",{staticClass:"im_icon el-icon-service"}),n("div",[n("el-button",{attrs:{round:""},on:{click:t.wsClose}},[t._v("关闭")]),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.wsSend}},[t._v("发送")])],1)])])])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"im_header"},[n("div",{staticClass:"im_header-name"},[n("span",[t._v("虾哔哔")])]),n("div",{staticClass:"im_header-right"},[n("i",{staticClass:"im_icon el-icon-minus"}),n("i",{staticClass:"im_icon el-icon-close"})])])}],s=(n("6b54"),n("a481"),n("cadf"),n("551c"),n("097d"),{name:"IM",data:function(){return{server:"212.64.45.79",botid:"d5eac34f23cf406a9af48609b639d48e",Socket:null,input_msg:"",msg_list:[],hot_question:[]}},computed:{},created:function(){try{this.initSocket(),this.getHotQuestion()}catch(t){console.log(t)}},watch:{msg_list:function(){this.scrollToBottom()}},methods:{initSocket:function(){var t=this,e={server:this.server,botid:this.botid,sid:this.UUID(),debugmode:"on"},n="ws://".concat(e.server,"/ws?sid=").concat(e.sid,"&botid=").concat(e.botid,"&debugmode=").concat(e.debugmode);this.Socket=new WebSocket(n),this.Socket.onopen=function(e){t.wsOnOpen(e)},this.Socket.onmessage=function(e){t.wsOnMessage(e)},this.Socket.onerror=function(e){t.wsOnError(e)},this.Socket.onclose=function(e){t.wsOnClose(e)}},wsOnOpen:function(t){this.msg_list.push({type:"tips",msg:"机器人上线了"}),this.wsSend()},wsOnMessage:function(t){var e=JSON.parse(t.data);this.msg_list.push(e)},wsOnError:function(t){},wsOnClose:function(t){this.msg_list.push({type:"tips",msg:"机器人下线了"})},wsSend:function(t){if(console.log(this.Socket.readyState),1===this.Socket.readyState){if(""!=this.input_msg){this.Socket.send(this.input_msg);var e=this.$dayjs();this.msg_list.push({msg:this.input_msg,log:{user_type:0,msg_type:0,msg_time:e}}),this.input_msg=""}}else this.initSocket()},wsClose:function(){this.Socket.close()},getHotQuestion:function(){var t=this;this.$axios.post("http://".concat(this.server,"/cms/api/hot_question"),{bot_id:this.botid,start_time:this.$dayjs((new Date).getTime()-6048e5).format("YYYY-MM-DD"),end_time:this.$dayjs().format("YYYY-MM-DD")}).then(function(e){console.log(e.data),t.hot_question=e.data}).catch(function(t){})},clickHotQuestion:function(t){var e=t.target.innerText;this.input_msg=e,this.wsSend()},UUID:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return e},handleScroll:function(){this.gotop=window.pageYOffset>=this.height},scrollTop:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)});var o=Math.abs(e-n),s=Math.ceil(o/i*50);function r(e,n,i){if(e!==n){var o=e+i>n?n:e+i;e>n&&(o=e-i<n?n:e-i),t===window?window.scrollTo(o,o):t.scrollTop=o,window.requestAnimationFrame(function(){return r(o,n,i)})}}r(e,n,s)},scrollToBottom:function(){var t=this.$refs.ref_scroll;t.scrollTop!=t.scrollHeight&&this.scrollTop(this.$refs.ref_scroll,t.scrollTop,t.scrollHeight,1300)}}}),r=s,c=(n("3c94"),n("2877")),a=Object(c["a"])(r,i,o,!1,null,"3f10cb06",null);a.options.__file="IM.vue";e["default"]=a.exports},"214f":function(t,e,n){"use strict";n("b0c5");var i=n("2aba"),o=n("32e9"),s=n("79e5"),r=n("be13"),c=n("2b4c"),a=n("520a"),u=c("species"),l=!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=c(t),p=!s(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),g=p?!s(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!e}):void 0;if(!p||!g||"replace"===t&&!l||"split"===t&&!f){var h=/./[d],m=n(r,d,""[t],function(t,e,n,i,o){return e.exec===a?p&&!o?{done:!0,value:h.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),v=m[0],x=m[1];i(String.prototype,t,v),o(RegExp.prototype,d,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3c94":function(t,e,n){"use strict";var i=n("5751"),o=n.n(i);o.a},"520a":function(t,e,n){"use strict";var i=n("0bfb"),o=RegExp.prototype.exec,s=String.prototype.replace,r=o,c="lastIndex",a=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t[c]||0!==e[c]}(),u=void 0!==/()??/.exec("")[1],l=a||u;l&&(r=function(t){var e,n,r,l,f=this;return u&&(n=new RegExp("^"+f.source+"$(?!\\s)",i.call(f))),a&&(e=f[c]),r=o.call(f,t),a&&r&&(f[c]=f.global?r.index+r[0].length:e),u&&r&&r.length>1&&s.call(r[0],n,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(r[l]=void 0)}),r}),t.exports=r},5751:function(t,e,n){},"5f1b":function(t,e,n){"use strict";var i=n("23c6"),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var s=n.call(t,e);if("object"!==typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},"6b54":function(t,e,n){"use strict";n("3846");var i=n("cb7c"),o=n("0bfb"),s=n("9e1e"),r="toString",c=/./[r],a=function(t){n("2aba")(RegExp.prototype,r,t,!0)};n("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?a(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?o.call(t):void 0)}):c.name!=r&&a(function(){return c.call(this)})},a481:function(t,e,n){"use strict";var i=n("cb7c"),o=n("4bf8"),s=n("9def"),r=n("4588"),c=n("0390"),a=n("5f1b"),u=Math.max,l=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,function(t,e,n,h){return[function(i,o){var s=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,s,o):n.call(String(s),i,o)},function(t,e){var o=h(n,t,this,e);if(o.done)return o.value;var f=i(t),d=String(this),p="function"===typeof e;p||(e=String(e));var v=f.global;if(v){var x=f.unicode;f.lastIndex=0}var _=[];while(1){var b=a(f,d);if(null===b)break;if(_.push(b),!v)break;var w=String(b[0]);""===w&&(f.lastIndex=c(d,s(f.lastIndex),x))}for(var y="",S=0,k=0;k<_.length;k++){b=_[k];for(var C=String(b[0]),M=u(l(r(b.index),d.length),0),E=[],$=1;$<b.length;$++)E.push(g(b[$]));var T=b.groups;if(p){var O=[C].concat(E,M,d);void 0!==T&&O.push(T);var R=String(e.apply(void 0,O))}else R=m(C,d,M,E,T,e);M>=S&&(y+=d.slice(S,M)+R,S=M+C.length)}return y+d.slice(S)}];function m(t,e,i,s,r,c){var a=i+t.length,u=s.length,l=p;return void 0!==r&&(r=o(r),l=d),n.call(c,l,function(n,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(a);case"<":c=r[o.slice(1,-1)];break;default:var l=+o;if(0===l)return n;if(l>u){var d=f(l/10);return 0===d?n:d<=u?void 0===s[d-1]?o.charAt(1):s[d-1]+o.charAt(1):n}c=s[l-1]}return void 0===c?"":c})}})},b0c5:function(t,e,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})}}]);
//# sourceMappingURL=chunk-0e613ce8.14e614fb.js.map